import _slicedToArray from"@babel/runtime-corejs3/helpers/slicedToArray";import{useState,useEffect}from"react";import debounce from"lodash/debounce";import FontFaceObserver from"fontfaceobserver";export function useObserveThemeFontsLoading(elementRef){const _useState=useState(),_useState2=_slicedToArray(_useState,2),latestUpdate=_useState2[0],setLatestUpdate=_useState2[1];return useEffect((()=>{if(!elementRef.current)return;const fonts=(referenceElement=elementRef.current,["Material Icons Round",...getComputedStyle(referenceElement).getPropertyValue("--GW-FONT-FAMILY").replace(new RegExp('"',"g"),"").split(",").map((fontName=>fontName.trim()))]);var referenceElement;let isEffectStale=!1;return function(fonts,callback){fonts.forEach((async fontName=>{try{await new FontFaceObserver(fontName).load()}catch(e){return}callback(fontName)}))}(fonts,debounce((()=>{isEffectStale||setLatestUpdate(Date.now())}),200)),()=>{isEffectStale=!0}}),[elementRef]),latestUpdate}