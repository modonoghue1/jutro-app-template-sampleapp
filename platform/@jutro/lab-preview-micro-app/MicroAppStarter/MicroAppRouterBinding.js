import{useHistory}from"react-router-dom";import React,{useEffect}from"react";import{ShellHistoryProvider}from"./ShellHistoryProvider";export const MicroAppRouterBinding=({children:children,routerBasename:routerBasename,shellHistory:shellHistory})=>{const microAppHistory=useHistory();return useShellAppRouterListener((location=>{var _location$state;if(!(null!=location&&null!==(_location$state=location.state)&&void 0!==_location$state&&_location$state.externalRouting)&&(!routerBasename||location.pathname===routerBasename||location.pathname.startsWith(`${routerBasename}/`))){const pathWithoutBasename=location.pathname.replace(new RegExp(`^${routerBasename}`),"");microAppHistory.replace(pathWithoutBasename,{externalRouting:!0})}}),shellHistory),useMicroAppRouterListener((location=>{var _location$state2;!(null!=location&&null!==(_location$state2=location.state)&&void 0!==_location$state2&&_location$state2.externalRouting||routerBasename)&&shellHistory.replace(`${routerBasename||""}${location.pathname}`,{externalRouting:!0})}),shellHistory,microAppHistory),React.createElement(ShellHistoryProvider,{shellHistory:shellHistory},children)};export const useShellAppRouterListener=(listener,shellHistory)=>{useEffect((()=>shellHistory.listen(listener)),[listener,shellHistory])};export const useMicroAppRouterListener=(listener,shellHistory,microAppHistory)=>{useEffect((()=>microAppHistory.listen(listener)),[shellHistory,microAppHistory,listener])};MicroAppRouterBinding.__docgenInfo={description:"",methods:[],displayName:"MicroAppRouterBinding"},MicroAppRouterBinding.__docgenInfo={componentName:"MicroAppRouterBinding",packageName:"@jutro/lab-preview-micro-app",description:"",displayName:"MicroAppRouterBinding",methods:[],actualName:"MicroAppRouterBinding"};