import _classCallCheck from"@babel/runtime-corejs3/helpers/classCallCheck";import _createClass from"@babel/runtime-corejs3/helpers/createClass";import _defineProperty from"@babel/runtime-corejs3/helpers/defineProperty";import logger from"loglevel";import prefix from"loglevel-plugin-prefix";import{getConfigValue}from"@jutro/config";const DEFAULT_LOGGER_CONFIG={level:getConfigValue("JUTRO_LOGGER_LEVEL","WARN"),prefixTemplate:"%l:",loggerName:"jutro-logger"};let Logger=function(){function Logger(loggerConfig){_classCallCheck(this,Logger),_defineProperty(this,"log",void 0);const config=loggerConfig||DEFAULT_LOGGER_CONFIG;this.setConfig(config)}return _createClass(Logger,[{key:"setConfig",value:function(config,replace){const configs=replace?config:{...DEFAULT_LOGGER_CONFIG,...config},level=configs.level,prefixTemplate=configs.prefixTemplate,loggerName=configs.loggerName;prefix.reg(logger),prefix.apply(logger,{template:prefixTemplate}),this.log=logger.getLogger(loggerName),this.log.setLevel(level)}},{key:"resetConfig",value:function(){this.setConfig(DEFAULT_LOGGER_CONFIG)}},{key:"trace",value:function(message){this.log.trace(message)}},{key:"debug",value:function(message){this.log.debug(message)}},{key:"info",value:function(message){this.log.info(message)}},{key:"warning",value:function(message,options){options&&options.bold?this.log.warn(`%c${message}`,"font-weight: bold"):this.log.warn(message)}},{key:"error",value:function(message){this.log.error(message)}}]),Logger}();export{Logger as default};export const log=new Logger;export const trace=message=>{log.trace(message)};export const debug=message=>{log.debug(message)};export const info=message=>{log.info(message)};export const warning=(message,options)=>{log.warning(message,options)};export const error=message=>{log.error(message)};export const makeUniqueWarningLog=message=>(messageFunction=>{let called=!1;return message=>{called||(called=!0,messageFunction(message))}})((()=>warning(message)));