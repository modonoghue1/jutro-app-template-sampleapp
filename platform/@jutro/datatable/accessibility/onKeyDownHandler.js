const isEditableFieldTarget=e=>"textarea"===e.target.type||"text"===e.target.type||"number"===e.target.type;export const onKeyDownHandler=(focused,tableId,rtState)=>e=>{let focusedColumn=focused.column,focusedRow=focused.row;const columns=rtState.allVisibleColumns,endRow=rtState.endRow;switch(e.key){case"ArrowLeft":if(isEditableFieldTarget(e))return;focusedColumn>0&&(focusedColumn-=1);break;case"ArrowRight":if(isEditableFieldTarget(e))return;focusedColumn<columns.length-1&&(focusedColumn+=1);break;case"ArrowUp":if(isEditableFieldTarget(e))return;focusedRow>0&&(focusedRow-=1);break;case"ArrowDown":if(isEditableFieldTarget(e))return;focusedRow<endRow&&(focusedRow+=1);break;case"Home":if(isEditableFieldTarget(e))return;e.ctrlKey&&0!==focusedRow&&(focusedRow=0),0!==focusedColumn&&(focusedColumn=0);break;case"End":if(isEditableFieldTarget(e))return;e.ctrlKey&&focusedRow!==endRow&&(focusedRow=endRow),focusedColumn!==columns.length-1&&(focusedColumn=columns.length-1);break;case"PageUp":0!==focusedRow&&(focusedRow=0);break;case"PageDown":focusedRow!==endRow&&(focusedRow=endRow);break;case"Enter":if(e.altKey)return;((e,columnId)=>{"selection"!==columnId&&e.target.click()})(e,columns[focusedColumn].id);break;default:return}((e,focusedRow,id,tableId)=>{e.preventDefault();const nodes=document.querySelectorAll(`[data-row="${focusedRow}"][data-col="${id}"][data-parent="${tableId}"]`);if(nodes[0]){const focusableElement=nodes[0].querySelectorAll("[tabIndex]")[0]||nodes[0].querySelectorAll("label")[0];focusableElement?focusableElement.focus():nodes[0].focus()}})(e,focusedRow,columns[focusedColumn].id,tableId)};