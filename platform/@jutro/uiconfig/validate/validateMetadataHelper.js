import _ from"lodash";import{isEmptyValue}from"@jutro/data";import{logDeprecationMessage}from"@jutro/platform";import{findContentFromMetadata,prepareContentFromMetadata}from"../render/renderMetadataHelper";export function validateFieldUsingMetadata(metadata){const _ref=metadata.componentProps||{},required=_ref.required,validationMessages=_ref.validationMessages,value=_ref.value;return!!_.isEmpty(validationMessages)&&(!0!==required||!isEmptyValue(value))}export function validateContentFromMetadata(contentMetadata,overrideProps,resolvers,rootMetadata={},skipHidden=!0){logDeprecationMessage("validateContentFromMetadata","onValidationChange","See MetadataForm examples.","7.0.0");const preparedContent=prepareContentFromMetadata(contentMetadata,overrideProps,resolvers,rootMetadata);return!findContentFromMetadata(preparedContent,(item=>"field"===item.type),skipHidden).some((item=>!validateFieldUsingMetadata(item)))}export function findInvalidFieldsFromMetadata(contentMetadata,overrideProps,resolvers,rootMetadata={},skipHidden=!0){const preparedContent=prepareContentFromMetadata(contentMetadata,overrideProps,resolvers,rootMetadata);return findContentFromMetadata(preparedContent,(item=>"field"===item.type),skipHidden).filter((item=>!validateFieldUsingMetadata(item)))}