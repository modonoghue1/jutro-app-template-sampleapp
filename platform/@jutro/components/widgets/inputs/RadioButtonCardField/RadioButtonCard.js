import _extends from"@babel/runtime-corejs3/helpers/extends";import _objectWithoutProperties from"@babel/runtime-corejs3/helpers/objectWithoutProperties";import _classCallCheck from"@babel/runtime-corejs3/helpers/classCallCheck";import _createClass from"@babel/runtime-corejs3/helpers/createClass";import _assertThisInitialized from"@babel/runtime-corejs3/helpers/assertThisInitialized";import _inherits from"@babel/runtime-corejs3/helpers/inherits";import _possibleConstructorReturn from"@babel/runtime-corejs3/helpers/possibleConstructorReturn";import _getPrototypeOf from"@babel/runtime-corejs3/helpers/getPrototypeOf";import _defineProperty from"@babel/runtime-corejs3/helpers/defineProperty";function _createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}import React,{Component}from"react";import cx from"classnames";import{uniqueInnerId}from"@jutro/platform";import PropTypes from"prop-types";import{intlMessageShape}from"@jutro/prop-types";import{getKeyPressHandler}from"../../../accessibility/getKeyPressHandler";import{Icon}from"../../Icon/Icon";import{CurrencyValue}from"../../values/CurrencyValue";export const PORTRAIT_LAYOUT="portrait";export const LANDSCAPE_LAYOUT="landscape";export const LAYOUT_PROP_TYPE=PropTypes.oneOf(["portrait","landscape"]);const renderCardIcon=(props,styles={})=>{const iconName=props.iconName,iconSrc=props.iconSrc,iconContainerClasses=props.iconContainerClasses,iconContentClasses=props.iconContentClasses;return React.createElement("div",{className:iconContainerClasses},iconSrc?React.createElement("img",{src:iconSrc,alt:iconName,className:cx(styles.imageIcon,iconContentClasses)}):React.createElement(Icon,{icon:iconName,className:iconContentClasses,size:"large"}))},cardFactoryMap={portrait:{renderContent:(radioButton,{name:name,moneyAmount:moneyAmount,secondaryLabel:secondaryLabel,iconName:iconName,currency:currency,iconSrc:iconSrc},{styles:styles,iconContentClasses:iconContentClasses,iconContainerClasses:iconContainerClasses},{nameId:nameId,secondaryLabelId:secondaryLabelId,moneyId:moneyId})=>React.createElement("div",{className:styles.cardWrapperPortrait},renderCardIcon({iconName:iconName,iconSrc:iconSrc,iconContainerClasses:iconContainerClasses,iconContentClasses:iconContentClasses},styles),React.createElement(CurrencyValue,{id:moneyId,amount:moneyAmount,currency:currency,showFractions:!0,className:styles.moneyAmount}),React.createElement("div",{id:nameId,className:styles.namePortrait},name),React.createElement("div",{id:secondaryLabelId,className:styles.secondaryLabelPortrait},secondaryLabel),radioButton),getIconContentClasses:styles=>cx(styles.iconContentPortrait),getIconContainerClasses:styles=>cx(styles.iconContainerPortrait),getIconWrapperClasses:(styles,checked)=>cx(styles.radioWrapper,styles.radioWrapperPortrait,{[styles.radioWrapperChecked]:checked}),getCardClasses:(styles,checked,disabled,{focused:focused,active:active})=>cx(styles.cardPortrait,{[styles.cardChecked]:checked},{[styles.disabled]:disabled},{[styles.cardFocused]:focused},{[styles.cardActive]:active})},landscape:{renderContent:(radioButton,{name:name,moneyAmount:moneyAmount,secondaryLabel:secondaryLabel,iconName:iconName,currency:currency,iconSrc:iconSrc},{styles:styles,iconContentClasses:iconContentClasses,iconContainerClasses:iconContainerClasses},{nameId:nameId,secondaryLabelId:secondaryLabelId,moneyId:moneyId})=>React.createElement("div",{className:styles.cardWrapperLandscape},radioButton,renderCardIcon({iconName:iconName,iconSrc:iconSrc,iconContainerClasses:iconContainerClasses,iconContentClasses:iconContentClasses},styles),React.createElement("div",{className:styles.contentWrapperLandscape},React.createElement(CurrencyValue,{id:moneyId,amount:moneyAmount,currency:currency,showFractions:!0,className:styles.moneyAmount}),React.createElement("div",{id:nameId,className:styles.nameLandscape},name),React.createElement("div",{id:secondaryLabelId,className:styles.secondaryLabelLandscape},secondaryLabel))),getIconContentClasses:styles=>cx(styles.iconContentLandscape),getIconContainerClasses:styles=>cx(styles.iconContainerLandscape),getIconWrapperClasses:(styles,checked)=>cx(styles.radioWrapper,styles.radioWrapperLandscape,{[styles.radioWrapperChecked]:checked}),getCardClasses:(styles,checked,disabled,{focused:focused,active:active})=>cx(styles.cardLandscape,{[styles.cardChecked]:checked},{[styles.disabled]:disabled},{[styles.cardFocused]:focused},{[styles.cardActive]:active})}};export let RadioButtonCard=function(_Component){_inherits(RadioButtonCard,Component);var _super=_createSuper(RadioButtonCard);function RadioButtonCard(props){var _this;return _classCallCheck(this,RadioButtonCard),_this=_super.call(this,props),_defineProperty(_assertThisInitialized(_this),"state",{focused:!1}),_defineProperty(_assertThisInitialized(_this),"handleClick",(()=>{const _this$props=_this.props,disabled=_this$props.disabled,code=_this$props.code,onValueSelect=_this$props.onValueSelect;disabled||(_this.radioRef.current.focus(),onValueSelect(code))})),_defineProperty(_assertThisInitialized(_this),"handleKeyPress",getKeyPressHandler(_this.handleClick)),_defineProperty(_assertThisInitialized(_this),"handleBlur",(()=>{_this.setState({focused:!1})})),_defineProperty(_assertThisInitialized(_this),"activateCard",(e=>{" "===e.key&&_this.setActive(!0)})),_defineProperty(_assertThisInitialized(_this),"deactivateCard",(e=>{" "===e.key&&_this.setActive(!1)})),_this.radioRef=React.createRef(),_this}return _createClass(RadioButtonCard,[{key:"setActive",value:function(active){this.setState({active:active})}},{key:"render",value:function(){const _this$props2=this.props,id=_this$props2.id,code=_this$props2.code,name=_this$props2.name,iconName=_this$props2.iconName,secondaryLabel=_this$props2.secondaryLabel,moneyAmount=_this$props2.moneyAmount,currency=_this$props2.currency,disabled=_this$props2.disabled,checked=_this$props2.checked,layout=(_this$props2.onValueSelect,_this$props2.layout),styles=_this$props2.styles,iconSrc=_this$props2.iconSrc,iconClassName=_this$props2.iconClassName,tabIndex=_this$props2.tabIndex,iconContainerClassName=_this$props2.iconContainerClassName,other=_objectWithoutProperties(_this$props2,["id","code","name","iconName","secondaryLabel","moneyAmount","currency","disabled","checked","onValueSelect","layout","styles","iconSrc","iconClassName","tabIndex","iconContainerClassName"]),_ref=cardFactoryMap[layout]||cardFactoryMap.portrait,getIconWrapperClasses=_ref.getIconWrapperClasses,getCardClasses=_ref.getCardClasses,renderContent=_ref.renderContent,getIconContentClasses=_ref.getIconContentClasses,getIconContainerClasses=_ref.getIconContainerClasses,currentTabIndex=disabled?void 0:tabIndex,iconWrapperClasses=getIconWrapperClasses(styles,checked),cardClasses=getCardClasses(styles,checked,disabled,this.state),iconContentClasses=cx(getIconContentClasses(styles),iconClassName),iconContainerClasses=cx(getIconContainerClasses(styles),iconContainerClassName),_uniqueInnerId=uniqueInnerId(id,"valueId","nameId","secondaryLabelId","moneyId"),valueId=_uniqueInnerId.valueId,nameId=_uniqueInnerId.nameId,secondaryLabelId=_uniqueInnerId.secondaryLabelId,moneyId=_uniqueInnerId.moneyId,radioButton=React.createElement("div",{className:iconWrapperClasses,ref:this.radioRef,tabIndex:currentTabIndex,role:"radio","aria-disabled":disabled,"aria-checked":checked,"aria-labelledby":`${nameId} ${secondaryLabelId} ${moneyId}`},React.createElement("input",_extends({type:"hidden",id:valueId,className:styles.radioInput,value:code,checked:checked,readOnly:!0,disabled:disabled},other)));return React.createElement("div",{key:valueId,role:"presentation",className:cardClasses,"data-value":code,onClick:this.handleClick,onKeyPress:this.handleKeyPress,onKeyDown:this.activateCard,onKeyUp:this.deactivateCard,onBlur:this.handleBlur},renderContent(radioButton,{name:name,secondaryLabel:secondaryLabel,moneyAmount:moneyAmount,iconName:iconName,currency:currency,iconSrc:iconSrc},{styles:styles,iconContentClasses:iconContentClasses,iconContainerClasses:iconContainerClasses},{nameId:nameId,secondaryLabelId:secondaryLabelId,moneyId:moneyId}))}}]),RadioButtonCard}();_defineProperty(RadioButtonCard,"propTypes",{code:intlMessageShape.isRequired,name:intlMessageShape.isRequired,secondaryLabel:intlMessageShape.isRequired,moneyAmount:PropTypes.number,tabIndex:PropTypes.number,currency:PropTypes.string,layout:LAYOUT_PROP_TYPE}),_defineProperty(RadioButtonCard,"defaultProps",{layout:"portrait"}),RadioButtonCard.__docgenInfo={description:"Renders a radio button displayed as a card.\n@typedef {typeof RadioButtonCard.propTypes} RadioButtonCardPropTypes\n@extends Component<PropTypes.InferProps<RadioButtonCardPropTypes>>",methods:[{name:"handleClick",docblock:null,modifiers:[],params:[],returns:null},{name:"handleBlur",docblock:null,modifiers:[],params:[],returns:null},{name:"setActive",docblock:null,modifiers:[],params:[{name:"active",type:null}],returns:null},{name:"activateCard",docblock:null,modifiers:[],params:[{name:"e",type:null}],returns:null},{name:"deactivateCard",docblock:null,modifiers:[],params:[{name:"e",type:null}],returns:null}],displayName:"RadioButtonCard",props:{layout:{defaultValue:{value:"'portrait'",computed:!1},type:{name:"custom",raw:"LAYOUT_PROP_TYPE"},required:!1,description:"Cards layout"},code:{type:{name:"custom",raw:"intlMessageShape.isRequired"},required:!1,description:"Radio button code."},name:{type:{name:"custom",raw:"intlMessageShape.isRequired"},required:!1,description:"Name displayed below the radio button."},secondaryLabel:{type:{name:"custom",raw:"intlMessageShape.isRequired"},required:!1,description:"Secondary label displayed below the name."},moneyAmount:{type:{name:"number"},required:!1,description:"Money amount"},tabIndex:{type:{name:"number"},required:!1,description:"TabIndex of the Radio Button"},currency:{type:{name:"string"},required:!1,description:"Currency code"}}},renderCardIcon.__docgenInfo={componentName:"renderCardIcon",packageName:"@jutro/components",description:"",displayName:"renderCardIcon",methods:[],actualName:"renderCardIcon"},RadioButtonCard.__docgenInfo={componentName:"RadioButtonCard",packageName:"@jutro/components",description:"Renders a radio button displayed as a card.",displayName:"RadioButtonCard",methods:[{name:"handleClick",docblock:null,modifiers:[],params:[],returns:null},{name:"handleBlur",docblock:null,modifiers:[],params:[],returns:null},{name:"setActive",docblock:null,modifiers:[],params:[{name:"active",optional:!1,type:null}],returns:null},{name:"activateCard",docblock:null,modifiers:[],params:[{name:"e",optional:!1,type:null}],returns:null},{name:"deactivateCard",docblock:null,modifiers:[],params:[{name:"e",optional:!1,type:null}],returns:null}],actualName:"RadioButtonCard",props:{code:{type:{name:"union",value:[{name:"string"},{name:"shape",value:{id:{name:"string",required:!1},defaultMessage:{name:"string",required:!1},args:{name:"shape",value:{},required:!1}}}]},required:!0,description:"Radio button code."},name:{type:{name:"union",value:[{name:"string"},{name:"shape",value:{id:{name:"string",required:!1},defaultMessage:{name:"string",required:!1},args:{name:"shape",value:{},required:!1}}}]},required:!0,description:"Name displayed below the radio button."},secondaryLabel:{type:{name:"union",value:[{name:"string"},{name:"shape",value:{id:{name:"string",required:!1},defaultMessage:{name:"string",required:!1},args:{name:"shape",value:{},required:!1}}}]},required:!0,description:"Secondary label displayed below the name."},moneyAmount:{type:{name:"number"},required:!1,description:"Money amount"},tabIndex:{type:{name:"number"},required:!1,description:"TabIndex of the Radio Button"},currency:{type:{name:"string"},required:!1,description:"Currency code"},layout:{type:{name:"custom",raw:"LAYOUT_PROP_TYPE"},required:!1,description:"Cards layout",defaultValue:{value:"'portrait'",computed:!1}}}};