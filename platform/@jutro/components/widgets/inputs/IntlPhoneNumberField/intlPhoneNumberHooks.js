import{useEffect,useMemo,useContext}from"react";import{TranslatorContext}from"@jutro/locale";import intlTelInput from"intl-tel-input";import"intl-tel-input/build/js/utils.js";import{countryMessages}from"./IntlPhoneNumberField.messages";export const useInitializeIntlPhoneNumber=(inputEl,defaultCountry,disabled,placeholder,noDropdown)=>{const translator=useContext(TranslatorContext),localizedCountries=useMemo((()=>Object.keys(countryMessages).reduce(((obj,key)=>({...obj,[key]:translator(countryMessages[key])})),{})),[countryMessages]);useEffect((()=>{if(!inputEl.current)return;const intlPhoneNumberEl=intlTelInput(inputEl.current,{initialCountry:defaultCountry,preferredCountries:[defaultCountry],separateDialCode:!noDropdown,autoHideDialCode:!noDropdown,allowDropdown:!disabled,nationalMode:!1,formatOnDisplay:!0,localizedCountries:localizedCountries,autoPlaceholder:placeholder?"polite":"aggressive"});if(intlPhoneNumberEl){const el=document.getElementsByClassName("iti__selected-dial-code")[0];null==el||el.setAttribute("role","textbox"),null==el||el.setAttribute("aria-label","selected country code"),null==el||el.setAttribute("title","country code textbox")}return()=>{intlPhoneNumberEl.destroy(),inputEl.current&&(inputEl.current.style.paddingLeft=null)}}),[defaultCountry,disabled,inputEl,placeholder,noDropdown])};export const useSetNumberOnBlur=(value,intlPhoneNumberInstance,isFocused,noDropdown)=>{useEffect((()=>{var _value$countryCode;intlPhoneNumberInstance()&&(isFocused||("object"==typeof value?(null!==(_value$countryCode=value.countryCode)&&void 0!==_value$countryCode&&_value$countryCode.code&&intlPhoneNumberInstance().setCountry(value.countryCode.code),!noDropdown&&null!=value&&value.phoneNumber&&intlPhoneNumberInstance().setNumber(value.phoneNumber)):value&&intlPhoneNumberInstance().setNumber(value)))}),[intlPhoneNumberInstance,isFocused,value])};