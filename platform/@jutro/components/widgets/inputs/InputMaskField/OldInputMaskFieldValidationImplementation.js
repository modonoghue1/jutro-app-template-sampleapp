import _classCallCheck from"@babel/runtime-corejs3/helpers/classCallCheck";import _createClass from"@babel/runtime-corejs3/helpers/createClass";import _get from"@babel/runtime-corejs3/helpers/get";import _inherits from"@babel/runtime-corejs3/helpers/inherits";import _possibleConstructorReturn from"@babel/runtime-corejs3/helpers/possibleConstructorReturn";import _getPrototypeOf from"@babel/runtime-corejs3/helpers/getPrototypeOf";function _createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}import{getMessageProp}from"@jutro/platform";import{messages}from"./InputMaskField.messages";import{OldFieldComponentValidationImplementation}from"../FieldComponent/OldFieldComponentValidationImplementation";export let OldInputMaskFieldValidationImplementation=function(_OldFieldComponentVal){_inherits(OldInputMaskFieldValidationImplementation,OldFieldComponentValidationImplementation);var _super=_createSuper(OldInputMaskFieldValidationImplementation);function OldInputMaskFieldValidationImplementation(){return _classCallCheck(this,OldInputMaskFieldValidationImplementation),_super.apply(this,arguments)}return _createClass(OldInputMaskFieldValidationImplementation,[{key:"bind",value:function(entityToBind){const superBoundMethods=_get(_getPrototypeOf(OldInputMaskFieldValidationImplementation.prototype),"bind",this).call(this,entityToBind);return["getValidationMessages","componentDidUpdate"].reduce(((acc,method)=>({...acc,[method]:this[method].bind(entityToBind)})),superBoundMethods)}},{key:"componentDidUpdate",value:function(prevProps,...args){this.props.maskChar===prevProps.maskChar&&this.props.mask===prevProps.mask||(this.notifyChange(null),this.pristine=!0,this.focusPristine=!0),_get(_getPrototypeOf(OldInputMaskFieldValidationImplementation.prototype),"componentDidUpdate",this).call(this,prevProps,...args)}},{key:"getValidationMessages",value:function(value=this.props.value){const _this$props=this.props,readOnly=_this$props.readOnly,onGetValidationMessages=_this$props.onGetValidationMessages,messageProps=_this$props.messageProps,validationMessages=_get(_getPrototypeOf(OldInputMaskFieldValidationImplementation.prototype),"getValidationMessages",this).call(this,value)||[];if(readOnly||this.isEmpty())return validationMessages;if(!this.isComplete(this.applyMaskOnValue(value))){const incompleteInput=getMessageProp("incompleteInput",messageProps,messages);return[this.translator(incompleteInput)]}const customValidationMessages=null==onGetValidationMessages?void 0:onGetValidationMessages(value);return customValidationMessages?[this.translator(customValidationMessages)]:validationMessages}}]),OldInputMaskFieldValidationImplementation}();