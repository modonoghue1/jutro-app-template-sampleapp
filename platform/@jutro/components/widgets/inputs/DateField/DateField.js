import _extends from"@babel/runtime-corejs3/helpers/extends";import _slicedToArray from"@babel/runtime-corejs3/helpers/slicedToArray";import React,{useContext,useState,useEffect}from"react";import PropTypes from"prop-types";import{DATA_TYPE_OBJECT,dataTypeShapeWithDateTime,intlMessageShape,dateValueShape,deprecated}from"@jutro/prop-types";import{LocaleContext,IntlContext}from"@jutro/locale";import{FieldComponent}from"../FieldComponent/FieldComponent";import{DateFieldInternalDEPRECATED}from"./DateFieldInternal_DEPRECATED";import{FieldIcon}from"../FieldComponent/FieldIcon";import{DateFieldInternal}from"./DateFieldInternal";import{minDefaultYear,maxDefaultYear}from"./DateField.commons";export const dateFormatTypes=["vshort","short","long","abbreviated","full"];export const popperPlacementPositions=["auto","auto-end","bottom","bottom-end","bottom-start","left","left-end","left-start","right","right-end","right-start","top","top-end","top-start"];const dateFieldDefaultProps={...FieldComponent.defaultProps,icon:"gw-calendar-today",dataType:DATA_TYPE_OBJECT,format:"short",minDate:new Date(minDefaultYear,0),maxDate:new Date(maxDefaultYear,0),autoComplete:!1,showTime:!1,showCalendar:!0,invalidDate:!0};export const dateFieldPropTypes={...FieldComponent.propTypes,todayButtonText:intlMessageShape,maxDate:dateValueShape,minDate:dateValueShape,isClearable:PropTypes.bool,value:dateValueShape,dataType:dataTypeShapeWithDateTime,autoComplete:deprecated(PropTypes.bool,"7.0.0","Use name instead, if name provided, native autocomplete will be switched on"),popperPlacement:PropTypes.oneOf(popperPlacementPositions),format:PropTypes.oneOf(dateFormatTypes),showTime:deprecated(PropTypes.bool,"7.0.0","Use DateTimeField instead"),theme:PropTypes.shape({}),...FieldIcon.propTypes,isInitiallyOpen:PropTypes.bool,showCalendar:PropTypes.bool,name:PropTypes.string,invalidDate:PropTypes.oneOfType([PropTypes.bool,PropTypes.array])};export const DateField=props=>{const intl=useContext(IntlContext),_useContext=useContext(LocaleContext),locale=_useContext.locale,dateLocale=_useContext.dateLocale,_useState=useState(!1),_useState2=_slicedToArray(_useState,2),updateFlag=_useState2[0],triggerUpdate=_useState2[1];return useEffect((()=>{triggerUpdate(!updateFlag)}),[intl]),props.showTime?React.createElement(DateFieldInternalDEPRECATED,_extends({},props,{intl:intl,updateFlag:updateFlag,locale:dateLocale,localeCode:locale})):React.createElement(DateFieldInternal,_extends({},props,{intl:intl,updateFlag:updateFlag,locale:dateLocale,localeCode:locale}))};DateField.displayName="DateField",DateField.propTypes=dateFieldPropTypes,DateField.defaultProps=dateFieldDefaultProps,DateField.__docgenInfo={description:"Allows the user to either type or select a date. Displays them according to locale settings.\nValid format for manual input is ISO YYYY-MM-DD or MM/DD/YYYY. The time part (for the date and time\nfield) should be appended to the date and follow ISO standard. For example: 2020-05-03T:10:30.\nNote that time values are assumed to be in client time zone. Unless time zone is explicitly\nprovided through manual input (as per ISO format). Date only input treats dates as UTC dates.\n\n@extends {FieldComponent<DateFieldPropTypes>}\n\n@metadataType field",methods:[],displayName:"DateField",props:{icon:{defaultValue:{value:"'gw-calendar-today'",computed:!1},required:!1},dataType:{defaultValue:{value:"DATA_TYPE_OBJECT",computed:!0},type:{name:"custom",raw:"dataTypeShapeWithDateTime"},required:!1,description:"Format of the value"},format:{defaultValue:{value:"'short'",computed:!1},type:{name:"enum",value:[{value:"'vshort'",computed:!1},{value:"'short'",computed:!1},{value:"'long'",computed:!1},{value:"'abbreviated'",computed:!1},{value:"'full'",computed:!1}]},required:!1,description:"The readonly date format: 'short', 'long', 'abbreviated' or 'full'"},minDate:{defaultValue:{value:"new Date(minDefaultYear, 0)",computed:!1},type:{name:"custom",raw:"dateValueShape"},required:!1,description:"Min date"},maxDate:{defaultValue:{value:"new Date(maxDefaultYear, 0)",computed:!1},type:{name:"custom",raw:"dateValueShape"},required:!1,description:"Max date"},autoComplete:{defaultValue:{value:"false",computed:!1},type:{name:"custom",raw:"deprecated(\n    PropTypes.bool,\n    '7.0.0',\n    'Use name instead, if name provided, native autocomplete will be switched on'\n)"},required:!1,description:"HTML5 native autoComplete support"},showTime:{defaultValue:{value:"false",computed:!1},type:{name:"custom",raw:"deprecated(PropTypes.bool, '7.0.0', 'Use DateTimeField instead')"},required:!1,description:"Include a time selection element in the date picker\n@deprecated"},showCalendar:{defaultValue:{value:"true",computed:!1},type:{name:"bool"},required:!1,description:"Should display the calendar pop-over"},invalidDate:{defaultValue:{value:"true",computed:!1},type:{name:"union",value:[{name:"bool"},{name:"array"}]},required:!1,description:"Used by jutro-lab-preview-validation package: Sets invalidDate validation on DateField."},todayButtonText:{type:{name:"custom",raw:"intlMessageShape"},required:!1,description:"Display today button"},isClearable:{type:{name:"bool"},required:!1,description:"If true, field can be cleaned"},value:{type:{name:"custom",raw:"dateValueShape"},required:!1,description:"Date to display"},popperPlacement:{type:{name:"enum",value:[{value:"'auto'",computed:!1},{value:"'auto-end'",computed:!1},{value:"'bottom'",computed:!1},{value:"'bottom-end'",computed:!1},{value:"'bottom-start'",computed:!1},{value:"'left'",computed:!1},{value:"'left-end'",computed:!1},{value:"'left-start'",computed:!1},{value:"'right'",computed:!1},{value:"'right-end'",computed:!1},{value:"'right-start'",computed:!1},{value:"'top'",computed:!1},{value:"'top-end'",computed:!1},{value:"'top-start'",computed:!1}]},required:!1,description:"Popper placement option"},theme:{type:{name:"shape",value:{}},required:!1,description:"Theme config to apply"},isInitiallyOpen:{type:{name:"bool"},required:!1,description:"Should dropdown be initially opened"},name:{type:{name:"string"},required:!1,description:"This name will be passed to input name attribute and switched on autocomplete"}},composes:["../FieldComponent/FieldComponent","../FieldComponent/FieldIcon"]},DateField.__docgenInfo={componentName:"DateField",packageName:"@jutro/components",description:"Allows the user to either type or select a date. Displays them according to locale settings.\nValid format for manual input is ISO YYYY-MM-DD or MM/DD/YYYY. The time part (for the date and time\nfield) should be appended to the date and follow ISO standard. For example: 2020-05-03T:10:30.\nNote that time values are assumed to be in client time zone. Unless time zone is explicitly\nprovided through manual input (as per ISO format). Date only input treats dates as UTC dates.",displayName:"DateField",methods:[],actualName:"DateField",metadataType:"field",props:{todayButtonText:{type:{name:"union",value:[{name:"string"},{name:"shape",value:{id:{name:"string",required:!1},defaultMessage:{name:"string",required:!1},args:{name:"shape",value:{},required:!1}}}]},required:!1,description:"Display today button"},maxDate:{type:{name:"union",value:[{name:"number"},{name:"string"},{name:"instanceOf",value:"Date"},{name:"shape",value:{year:{name:"number",required:!0},month:{name:"number",required:!0},day:{name:"number",required:!0},hour:{name:"number",required:!1},minute:{name:"number",required:!1}}}]},required:!1,description:"Max date",defaultValue:{value:"new Date(maxDefaultYear, 0)",computed:!1}},minDate:{type:{name:"union",value:[{name:"number"},{name:"string"},{name:"instanceOf",value:"Date"},{name:"shape",value:{year:{name:"number",required:!0},month:{name:"number",required:!0},day:{name:"number",required:!0},hour:{name:"number",required:!1},minute:{name:"number",required:!1}}}]},required:!1,description:"Min date",defaultValue:{value:"new Date(minDefaultYear, 0)",computed:!1}},isClearable:{type:{name:"bool"},required:!1,description:"If true, field can be cleaned"},value:{type:{name:"union",value:[{name:"number"},{name:"string"},{name:"instanceOf",value:"Date"},{name:"shape",value:{year:{name:"number",required:!0},month:{name:"number",required:!0},day:{name:"number",required:!0},hour:{name:"number",required:!1},minute:{name:"number",required:!1}}}]},required:!1,description:"Date to display"},dataType:{type:{name:"enum",value:[{value:"'object'",computed:!1},{value:"'string'",computed:!1},{value:"'date-time'",computed:!1}]},required:!1,description:"Format of the value",defaultValue:{value:"'object'",computed:!1}},autoComplete:{type:{name:"bool"},required:!1,description:"@deprecated HTML5 native autoComplete support",defaultValue:{value:"false",computed:!1},deprecationInfo:{version:"7.0.0",mapTo:null}},popperPlacement:{type:{name:"enum",value:[{value:"'auto'",computed:!1},{value:"'auto-end'",computed:!1},{value:"'bottom'",computed:!1},{value:"'bottom-end'",computed:!1},{value:"'bottom-start'",computed:!1},{value:"'left'",computed:!1},{value:"'left-end'",computed:!1},{value:"'left-start'",computed:!1},{value:"'right'",computed:!1},{value:"'right-end'",computed:!1},{value:"'right-start'",computed:!1},{value:"'top'",computed:!1},{value:"'top-end'",computed:!1},{value:"'top-start'",computed:!1}]},required:!1,description:"Popper placement option"},format:{type:{name:"enum",value:[{value:"'vshort'",computed:!1},{value:"'short'",computed:!1},{value:"'long'",computed:!1},{value:"'abbreviated'",computed:!1},{value:"'full'",computed:!1}]},required:!1,description:"The readonly date format: 'short', 'long', 'abbreviated' or 'full'",defaultValue:{value:"'short'",computed:!1}},showTime:{type:{name:"bool"},required:!1,description:"Include a time selection element in the date picker\n@deprecated",defaultValue:{value:"false",computed:!1},deprecationInfo:{version:"7.0.0",mapTo:null}},theme:{type:{name:"shape",value:{}},required:!1,description:"Theme config to apply"},isInitiallyOpen:{type:{name:"bool"},required:!1,description:"Should dropdown be initially opened"},showCalendar:{type:{name:"bool"},required:!1,description:"Should display the calendar pop-over",defaultValue:{value:"true",computed:!1}},name:{type:{name:"string"},required:!1,description:"This name will be passed to input name attribute and switched on autocomplete"},invalidDate:{type:{name:"union",value:[{name:"bool"},{name:"array"}]},required:!1,description:"Used by jutro-lab-preview-validation package: Sets invalidDate validation on DateField.",defaultValue:{value:"true",computed:!1}},icon:{defaultValue:{value:"'gw-calendar-today'",computed:!1},required:!1}},composes:["../FieldComponent/FieldComponent","../FieldComponent/FieldIcon"]};