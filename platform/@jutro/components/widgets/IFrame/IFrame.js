import _extends from"@babel/runtime-corejs3/helpers/extends";import _slicedToArray from"@babel/runtime-corejs3/helpers/slicedToArray";import React,{useState}from"react";import{warning}from"@jutro/logger";import{intlMessageShape}from"@jutro/prop-types";import PropTypes from"prop-types";import cx from"classnames";import _ from"lodash";import styles from"./IFrame.module.css";import{Loader}from"../loading/loader/Loader";const aspectRatios=["4/3","16/9","17/9","2/1"],aspectRatioStyle=aspectRatios.reduce(((reduced,ratio)=>{const suffix=_.replace(ratio,"/","x");return reduced[ratio]=`aspect-ratio-${suffix}`,reduced}),{}),iframePropTypes={id:PropTypes.string.isRequired,src:PropTypes.string.isRequired,title:intlMessageShape.isRequired,aspectRatio:PropTypes.oneOf(aspectRatios),height:PropTypes.string,className:PropTypes.string,onLoad:PropTypes.func,showLoader:PropTypes.bool,noBorder:PropTypes.bool};export const IFrame=({id:id,src:src,height:height,title:title,aspectRatio:aspectRatio,className:className,loaderClassName:loaderClassName,onLoad:onLoad,showLoader:showLoader,noBorder:noBorder,...rest})=>{const _useState=useState(showLoader),_useState2=_slicedToArray(_useState,2),iframeLoading=_useState2[0],setIframeLoading=_useState2[1],_useState3=useState(src),_useState4=_slicedToArray(_useState3,2),prevSrc=_useState4[0],setPrevSrc=_useState4[1];src!==prevSrc&&(setPrevSrc(src),showLoader&&setIframeLoading(!0));const aspectRatioClass=styles[aspectRatioStyle[aspectRatio]],containerClasses=aspectRatioClass?cx(styles.iframeContainer,aspectRatioClass):styles.iframeContainer,iframeClasses=cx(styles.iframe,{[styles.noBorder]:noBorder},className);let frameContainerStyle={};return aspectRatio&&aspectRatios.includes(aspectRatio)||((height=>{const isValid=new RegExp("^[0-9]+(.[0-9]+)?(px|%)$").test(height);return isValid||warning(`Height prop : ${height} is not valid. Please provide a number suffixed with px or %`),isValid})(height)||(height=IFrame.defaultProps.height),frameContainerStyle={paddingBottom:height}),React.createElement("div",{className:containerClasses,style:frameContainerStyle},iframeLoading&&React.createElement(Loader,{className:cx(styles.loader,loaderClassName)}),React.createElement("iframe",_extends({id:id,src:src,title:title,onLoad:()=>{onLoad&&onLoad(),showLoader&&setIframeLoading(!1)},className:iframeClasses},rest)))};IFrame.propTypes=iframePropTypes,IFrame.defaultProps={height:"50%",showLoader:!0},IFrame.__docgenInfo={description:"IFrame\n@metadataType container\n\n@type {React.FC<PropTypes.InferProps<typeof iframePropTypes>>}",methods:[],displayName:"IFrame",props:{height:{defaultValue:{value:"'50%'",computed:!1},type:{name:"string"},required:!1,description:"height for iframe container in pixel or percentage format"},showLoader:{defaultValue:{value:"true",computed:!1},type:{name:"bool"},required:!1,description:"show loader when iframe still loading"},id:{type:{name:"string"},required:!0,description:"unique ID of iframe container"},src:{type:{name:"string"},required:!0,description:"src for iframe"},title:{type:{name:"custom",raw:"intlMessageShape.isRequired"},required:!1,description:"title for iframe"},aspectRatio:{type:{name:"enum",value:[{value:"'4/3'",computed:!1},{value:"'16/9'",computed:!1},{value:"'17/9'",computed:!1},{value:"'2/1'",computed:!1}]},required:!1,description:"aspectRatio for iframe"},className:{type:{name:"string"},required:!1,description:"className for iframe"},onLoad:{type:{name:"func"},required:!1,description:"function for onload event"},noBorder:{type:{name:"bool"},required:!1,description:"hide the iframe border"}}},IFrame.__docgenInfo={componentName:"IFrame",packageName:"@jutro/components",description:"IFrame",displayName:"IFrame",methods:[],actualName:"IFrame",metadataType:"container",props:{id:{type:{name:"string"},required:!0,description:"unique ID of iframe container"},src:{type:{name:"string"},required:!0,description:"src for iframe"},title:{type:{name:"union",value:[{name:"string"},{name:"shape",value:{id:{name:"string",required:!1},defaultMessage:{name:"string",required:!1},args:{name:"shape",value:{},required:!1}}}]},required:!0,description:"title for iframe"},aspectRatio:{type:{name:"enum",value:[{value:"'4/3'",computed:!1},{value:"'16/9'",computed:!1},{value:"'17/9'",computed:!1},{value:"'2/1'",computed:!1}]},required:!1,description:"aspectRatio for iframe"},height:{type:{name:"string"},required:!1,description:"height for iframe container in pixel or percentage format",defaultValue:{value:"'50%'",computed:!1}},className:{type:{name:"string"},required:!1,description:"className for iframe"},onLoad:{type:{name:"func"},required:!1,description:"function for onload event"},showLoader:{type:{name:"bool"},required:!1,description:"show loader when iframe still loading",defaultValue:{value:"true",computed:!1}},noBorder:{type:{name:"bool"},required:!1,description:"hide the iframe border"}}};