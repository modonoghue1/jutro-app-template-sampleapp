import _slicedToArray from"@babel/runtime-corejs3/helpers/slicedToArray";import React,{useContext,useCallback,useRef,useState}from"react";import PropTypes from"prop-types";import omit from"lodash/omit";import{ThemeChooser}from"@jutro/components";import{ThemeContext}from"@jutro/theme";import{themeList,defaultThemeConfig}from"@jutro/theme-styles";import{intlMessageShape}from"@jutro/prop-types";import uiMetadata from"./ThemeSettingsCard.metadata.json";import{SettingsCard}from"./SettingsCard";export const ThemeSettingsCard=({id:id,title:title="Theme",onSave:onSave,availableThemes:availableThemes=themeList,theme:initialTheme=defaultThemeConfig,onThemeChange:onThemeChange,...otherThemeChooserProps})=>{const themeContext=useContext(ThemeContext),_useState=useState(initialTheme!==defaultThemeConfig?initialTheme:themeContext),_useState2=_slicedToArray(_useState,2),theme=_useState2[0],setTheme=_useState2[1],ref=useRef(theme),formProps={uiProps:uiMetadata.ThemeSettingCard,callbackMap:{onThemeChange:selectedTheme=>{setTheme(selectedTheme),null==onThemeChange||onThemeChange(selectedTheme)}},overrideProps:{MetadataThemeChooser:{...otherThemeChooserProps,theme:theme,availableThemes:availableThemes}}},onSaveCallback=useCallback((()=>{themeContext.switchTheme(theme),null==onSave||onSave(theme),ref.current={...theme}}),[onSave,theme,themeContext]),onCancelCallback=useCallback((()=>setTheme(ref.current)),[theme]);return React.createElement(SettingsCard,{id:id,title:title,formProps:formProps,onSaveClick:onSaveCallback,onCancelClick:onCancelCallback})};export const themeSettingsCardPropTypes={...omit(ThemeChooser.propTypes,["storybookComponent","skipPropagation","availableThemes"]),id:PropTypes.string.isRequired,title:intlMessageShape,onSave:PropTypes.func};ThemeSettingsCard.propTypes=themeSettingsCardPropTypes,ThemeSettingsCard.displayName="ThemeSettingsCard",ThemeSettingsCard.__docgenInfo={description:"@metadataType container",methods:[],displayName:"ThemeSettingsCard",props:{title:{defaultValue:{value:"'Theme'",computed:!1},type:{name:"custom",raw:"intlMessageShape"},required:!1,description:""},availableThemes:{defaultValue:{value:"themeList",computed:!0},required:!1},theme:{defaultValue:{value:"defaultThemeConfig",computed:!0},required:!1},id:{type:{name:"string"},required:!0,description:""},onSave:{type:{name:"func"},required:!1,description:""}},composes:["lodash"]},ThemeSettingsCard.__docgenInfo={componentName:"ThemeSettingsCard",packageName:"@jutro/lab-preview-components",description:"",displayName:"ThemeSettingsCard",methods:[],actualName:"ThemeSettingsCard",metadataType:"container",props:{id:{type:{name:"string"},required:!0,description:""},title:{type:{name:"union",value:[{name:"string"},{name:"shape",value:{id:{name:"string",required:!1},defaultMessage:{name:"string",required:!1},args:{name:"shape",value:{},required:!1}}}]},required:!1,description:"",defaultValue:{value:"'Theme'",computed:!1}},onSave:{type:{name:"func"},required:!1,description:""},availableThemes:{defaultValue:{value:"themeList",computed:!0},required:!1},theme:{defaultValue:{value:"defaultThemeConfig",computed:!0},required:!1}},composes:["lodash"]};